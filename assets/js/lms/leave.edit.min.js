function getLeaveLength(){var e=moment($("#startdate").val());var t=moment($("#enddate").val());var n=$("#startdatetype option:selected").val();var r=$("#enddatetype option:selected").val();if(e.isValid()&&t.isValid()){if(e.isSame(t)){if(n=="Morning"&&r=="Morning"){addDays=.5;$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_1d_MM.png' />")}if(n=="Afternoon"&&r=="Afternoon"){addDays=.5;$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_1d_AA.png' />")}if(n=="Morning"&&r=="Afternoon"){addDays=1;$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_1d_MA.png' />")}if(n=="Afternoon"&&r=="Morning"){$("#spnDayOff").html("<img src='"+baseURL+"assets/images/date_error.png' />")}}else{if(e.isBefore(t)){if(n=="Morning"&&r=="Morning"){$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_2d_MM.png' />");addDays=.5}if(n=="Afternoon"&&r=="Afternoon"){$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_2d_AA.png' />");addDays=.5}if(n=="Morning"&&r=="Afternoon"){$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_2d_MA.png' />");addDays=1}if(n=="Afternoon"&&r=="Morning"){$("#spnDayOff").html("<img src='"+baseURL+"assets/images/leave_2d_AM.png' />");addDays=0}}}getLeaveInfos(false)}}function getLeaveInfos(e){$("#frmModalAjaxWait").modal("show");$.ajax({type:"POST",url:baseURL+"leaves/validate",data:{id:userId,type:$("#type option:selected").text(),startdate:$("#startdate").val(),enddate:$("#enddate").val(),startdatetype:$("#startdatetype").val(),enddatetype:$("#enddatetype").val()}}).done(function(t){if(typeof t.length!=="undefined"){var n=parseFloat(t.length)+addDays;if(!e)$("#duration").val(n)}if(typeof t.credit!=="undefined"){var r=parseInt(t.credit);var n=parseFloat($("#duration").val());if(n>r){$("#lblCreditAlert").show()}else{$("#lblCreditAlert").hide()}$("#lblCredit").text(t.credit)}if(typeof t.overlap!=="undefined"){if(Boolean(t.overlap)){$("#lblOverlappingAlert").show()}else{$("#lblOverlappingAlert").hide()}}$("#frmModalAjaxWait").modal("hide")})}var addDays=0;$(function(){$("#viz_startdate").datepicker({changeMonth:true,changeYear:true,altFormat:"yy-mm-dd",altField:"#startdate",numberOfMonths:1,onClose:function(e){$("#viz_enddate").datepicker("option","minDate",e)}},$.datepicker.regional[languageCode]);$("#viz_enddate").datepicker({changeMonth:true,changeYear:true,altFormat:"yy-mm-dd",altField:"#enddate",numberOfMonths:1,onClose:function(e){$("#viz_startdate").datepicker("option","maxDate",e)}},$.datepicker.regional[languageCode]);$("#days").keyup(function(){var e=$("#days").val();e=e.replace(",",".");$("#days").val(e)});$("#viz_startdate").change(function(){getLeaveLength()});$("#viz_enddate").change(function(){getLeaveLength()});$("#startdatetype").change(function(){getLeaveLength()});$("#enddatetype").change(function(){getLeaveLength()});$("#type").change(function(){getLeaveInfos(false)});$("#duration").keyup(function(){getLeaveInfos(true)})})